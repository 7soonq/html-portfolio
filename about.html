import React, { useState } from "react";

export default function ApplicationForm() {
  const [step, setStep] = useState(1);
  const [formData, setFormData] = useState({});

  const next = () => setStep((s) => s + 1);
  const back = () => setStep((s) => s - 1);

  const update = (field, value) => {
    setFormData({ ...formData, [field]: value });
  };

  const progress = (step / 5) * 100;

  return (
    <div className="max-w-3xl mx-auto p-6 space-y-6">
      {/* Progress Bar */}
      <div className="w-full bg-gray-200 rounded-full h-3">
        <div
          className="bg-blue-500 h-3 rounded-full transition-all"
          style={{ width: `${progress}%` }}
        ></div>
      </div>

      {/* Steps */}
      {step === 1 && (
        <BasicDataStep update={update} data={formData} />
      )}
      {step === 2 && <IncomeStep update={update} data={formData} />}
      {step === 3 && <AssetsStep update={update} data={formData} />}
      {step === 4 && <FamilyStep update={update} data={formData} />}
      {step === 5 && <HousingStep update={update} data={formData} />}

      {/* Navigation */}
      <div className="flex justify-between pt-4">
        {step > 1 ? (
          <button
            onClick={back}
            className="px-4 py-2 bg-gray-300 rounded-xl"
          >
            رجوع
          </button>
        ) : (
          <div></div>
        )}

        {step < 5 ? (
          <button
            onClick={next}
            className="px-4 py-2 bg-blue-600 text-white rounded-xl"
          >
            التالي
          </button>
        ) : (
          <button
            onClick={() => console.log(formData)}
            className="px-4 py-2 bg-green-600 text-white rounded-xl"
          >
            إرسال
          </button>
        )}
      </div>
    </div>
  );
}

// ====== Step 1: Basic Data ======
function BasicDataStep({ update, data }) {
  return (
    <div className="space-y-4">
      <h2 className="text-xl font-bold">البيانات الأساسية</h2>

      <input
        className="w-full p-2 rounded-xl border"
        placeholder="الاسم"
        value={data.name || ""}
        onChange={(e) => update("name", e.target.value)}
      />

      <select
        className="w-full p-2 rounded-xl border"
        value={data.gender || ""}
        onChange={(e) => update("gender", e.target.value)}
      >
        <option value="">اختر الجنس</option>
        <option value="ذكر">ذكر</option>
        <option value="أنثى">أنثى</option>
      </select>

      <input
        type="date"
        className="w-full p-2 rounded-xl border"
        value={data.birthdate || ""}
        onChange={(e) => update("birthdate", e.target.value)}
      />

      <input
        className="w-full p-2 rounded-xl border"
        placeholder="الحالة الاجتماعية"
        value={data.status || ""}
        onChange={(e) => update("status", e.target.value)}
      />

      <input
        className="w-full p-2 rounded-xl border"
        placeholder="المستوى التعليمي"
        value={data.education || ""}
        onChange={(e) => update("education", e.target.value)}
      />

      <input
        className="w-full p-2 rounded-xl border"
        placeholder="رقم الجوال"
        value={data.phone || ""}
        onChange={(e) => update("phone", e.target.value)}
      />

      <input
        className="w-full p-2 rounded-xl border"
        placeholder="رقم احتياطي"
        value={data.altPhone || ""}
        onChange={(e) => update("altPhone", e.target.value)}
      />

      <input
        className="w-full p-2 rounded-xl border"
        placeholder="المنطقة"
        value={data.region || ""}
        onChange={(e) => update("region", e.target.value)}
      />

      <input
        className="w-full p-2 rounded-xl border"
        placeholder="المدينة"
        value={data.city || ""}
        onChange={(e) => update("city", e.target.value)}
      />

      <input
        className="w-full p-2 rounded-xl border"
        placeholder="الحي"
        value={data.district || ""}
        onChange={(e) => update("district", e.target.value)}
      />

      <input
        type="file"
        className="w-full p-2 rounded-xl border"
        onChange={(e) => update("idImage", e.target.files[0])}
      />
    </div>
  );
}

// ====== Step 2: Income ======
function IncomeStep({ update, data }) {
  return (
    <div className="space-y-4">
      <h2 className="text-xl font-bold">الدخل</h2>

      {[
        "التقاعد",
        "الضمان الاجتماعي",
        "حساب المواطن",
        "التأهيل الشامل",
        "الراتب",
        "أخرى",
      ].map((key) => (
        <input
          key={key}
          className="w-full p-2 rounded-xl border"
          placeholder={`${key}`}
          value={data[key] || ""}
          onChange={(e) => update(key, e.target.value)}
        />
      ))}
    </div>
  );
}

// ====== Step 3: Assets ======
function AssetsStep({ update, data }) {
  return (
    <div className="space-y-4">
      <h2 className="text-xl font-bold">الأقساط والممتلكات</h2>

      <input
        className="w-full p-2 rounded-xl border"
        placeholder="عدد السيارات"
        value={data.cars || ""}
        onChange={(e) => update("cars", e.target.value)}
      />

      <input
        className="w-full p-2 rounded-xl border"
        placeholder="عدد الأراضي"
        value={data.lands || ""}
        onChange={(e) => update("lands", e.target.value)}
      />

      <input
        className="w-full p-2 rounded-xl border"
        placeholder="عدد المواشي"
        value={data.animals || ""}
        onChange={(e) => update("animals", e.target.value)}
      />

      <input
        type="file"
        className="w-full p-2 rounded-xl border"
        onChange={(e) => update("assetsProof", e.target.files[0])}
      />

      <input
        className="w-full p-2 rounded-xl border"
        placeholder="الأقساط"
        value={data.installments || ""}
        onChange={(e) => update("installments", e.target.value)}
      />

      <input
        type="file"
        className="w-full p-2 rounded-xl border"
        onChange={(e) => update("installmentsProof", e.target.files[0])}
      />
    </div>
  );
}

// ====== Step 4: Family Members ======
function FamilyStep({ update, data }) {
  return (
    <div className="space-y-4">
      <h2 className="text-xl font-bold">أفراد الأسرة</h2>

      <input
        className="w-full p-2 rounded-xl border"
        placeholder="عدد أفراد الأسرة"
        value={data.familyCount || ""}
        onChange={(e) => update("familyCount", e.target.value)}
      />

      <textarea
        className="w-full p-2 rounded-xl border"
        placeholder="أدخل بيانات أفراد الأسرة (الاسم، رقم الهوية، الميلاد، الحالة الاجتماعية، المرحلة الدراسية)"
        value={data.familyDetails || ""}
        onChange={(e) => update("familyDetails", e.target.value)}
      />
    </div>
  );
}

// ====== Step 5: Housing Evaluation ======
function HousingStep({ update, data }) {
  return (
    <div className="space-y-4">
      <h2 className="text-xl font-bold">الحالة السكنية</h2>

      <textarea
        className="w-full p-2 rounded-xl border"
        placeholder="تقييم المهندس لوضع المنزل من جميع الجهات"
        value={data.housing || ""}
        onChange={(e) => update("housing", e.target.value)}
      />
    </div>
  );
}
